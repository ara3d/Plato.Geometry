// Autogenerated file: DO NOT EDIT
// Created on 2025-03-06 1:31:00 PM

using System.Runtime.CompilerServices;
using System.Runtime.Serialization;
using System.Runtime.InteropServices;
using static System.Runtime.CompilerServices.MethodImplOptions;

namespace Plato
{
    public static class Extensions
    {
        public static Array<Integer> Indices<T>(this IArray<T> xs) => xs.Count.Range;
        public static Integer Count<T>(this IArray2D<T> xs) => xs.NumRows.Multiply(xs.NumColumns);
        public static Integer Count<T>(this IArray3D<T> xs) => xs.NumRows.Multiply(xs.NumColumns.Multiply(xs.NumLayers));
        public static T At<T>(this IArray2D<T> xs, Integer i) => xs.At(i.Modulo(xs.NumColumns), i.Divide(xs.NumColumns));
        public static T At<T>(this IArray3D<T> xs, Integer i) => xs.At(i.Modulo(xs.NumColumns), i.Divide(xs.NumColumns), i.Divide(xs.NumLayers));
        public static Boolean IsEmpty<T>(this IArray<T> xs) => xs.Count.Equals(((Integer)0));
        public static T First<T>(this IArray<T> xs) => xs.At(((Integer)0));
        public static T Last<T>(this IArray<T> xs) => xs.At(xs.Count.Subtract(((Integer)1)));
        public static T Middle<T>(this IArray<T> xs, Integer n) => xs.At(xs.Count.Divide(((Integer)2)));
        public static Array<T> Slice<T>(this IArray<T> xs, Integer from, Integer to) => xs.Subarray(from, to.Subtract(from));
        public static Array2D<T> Slices<T>(this IArray<T> xs, Integer size){
            var _var1 = size;
            {
                var _var0 = xs;
                return xs.Count.Divide(size).MakeArray2D(size, (col, row) => _var0.At(col.Multiply(_var1).Add(row)));
            }
        }

        public static Array<T> NthSlice<T>(this IArray<T> xs, Integer n, Integer size) => xs.Subarray(n.Multiply(size), size);
        public static Array<T> Subarray<T>(this IArray<T> xs, Integer from, Integer count){
            var _var3 = from;
            {
                var _var2 = xs;
                return count.MapRange((i) => _var2.At(i.Add(_var3)));
            }
        }

        public static Array<T> Skip<T>(this IArray<T> xs, Integer n) => xs.Subarray(n, xs.Count.Subtract(n));
        public static Array<T> Take<T>(this IArray<T> xs, Integer n) => xs.Subarray(((Integer)0), n);
        public static Array<T> TakeLast<T>(this IArray<T> xs, Integer n) => xs.Skip(xs.Count.Subtract(((Integer)1)));
        public static Array<T> Drop<T>(this IArray<T> xs, Integer n) => xs.Take(xs.Count.Subtract(n));
        public static Array<T> Trim<T>(this IArray<T> xs, Integer first, Integer last) => xs.Skip(first).Drop(last);
        public static IArray<T> Rest<T>(this IArray<T> xs) => xs.Skip(((Integer)1));
        public static TR Reduce<T1, TR>(this IArray<T1> xs, TR acc, System.Func<TR, T1, TR> f){
            var r = acc;
            {
                var i = ((Integer)0);
                while (i.LessThan(xs.Count))
                {
                    r = f.Invoke(r, xs.At(i));
                    i = i.Add(((Integer)1));
                }

            }
            return r;
        }

        public static Boolean All<T0>(this IArray<T0> xs, System.Func<T0, Boolean> f){
            {
                var i = ((Integer)0);
                while (i.LessThan(xs.Count))
                {
                    if (f.Invoke(xs.At(i)).Not)
                    return ((Boolean)false);
                    i = i.Add(((Integer)1));
                }

            }
            return ((Boolean)true);
        }

        public static Boolean Any<T0>(this IArray<T0> xs, System.Func<T0, Boolean> f){
            {
                var i = ((Integer)0);
                while (i.LessThan(xs.Count))
                {
                    if (f.Invoke(xs.At(i)))
                    return ((Boolean)true);
                    i = i.Add(((Integer)1));
                }

            }
            return ((Boolean)false);
        }

        public static Array<TR> Map<T0, TR>(this IArray<T0> xs, System.Func<T0, TR> f){
            var _var5 = xs;
            {
                var _var4 = f;
                return xs.Count.MapRange((i) => _var4.Invoke(_var5.At(i)));
            }
        }

        public static Array<TR> Zip<T0, T1, TR>(this IArray<T0> xs, IArray<T1> ys, System.Func<T0, T1, TR> f){
            var _var8 = ys;
            {
                var _var7 = xs;
                {
                    var _var6 = f;
                    return xs.Count.Lesser(ys.Count).MapRange((i) => _var6.Invoke(_var7.At(i), _var8.At(i)));
                }
            }
        }

        public static Array<TR> Zip<T0, T1, T2, TR>(this IArray<T0> xs, IArray<T1> ys, IArray<T2> zs, System.Func<T0, T1, T2, TR> f){
            var _var12 = zs;
            {
                var _var11 = ys;
                {
                    var _var10 = xs;
                    {
                        var _var9 = f;
                        return xs.Count.Lesser(ys.Count).Lesser(zs.Count).MapRange((i) => _var9.Invoke(_var10.At(i), _var11.At(i), _var12.At(i)));
                    }
                }
            }
        }

        public static T ModuloAt<T>(this IArray<T> xs, Integer n) => xs.At(n.Modulo(xs.Count));
        public static Array<T> Shift<T>(this IArray<T> xs, Integer n){
            var _var13 = xs;
            return xs.Count.MapRange((i) => _var13.ModuloAt(i));
        }

        public static Array<TR> WithNext<T1, TR>(this IArray<T1> xs, System.Func<T1, T1, TR> f) => xs.Drop(((Integer)1)).Zip(xs.Skip(((Integer)1)), f);
        public static Array<TR> WithNextAndBeginning<T1, TR>(this IArray<T1> xs, System.Func<T1, T1, TR> f) => xs.Zip(xs.Shift(((Integer)1)), f);
        public static Array<TR> WithNext<T1, TR>(this IArray<T1> xs, System.Func<T1, T1, TR> f, Boolean connect) => connect ? xs.WithNextAndBeginning(f) : xs.WithNext(f);
        public static Array<T> EveryNth<T>(this IArray<T> self, Integer n){
            var _var15 = n;
            {
                var _var14 = self;
                return self.Indices().Map((i) => _var14.ModuloAt(i.Multiply(_var15)));
            }
        }

        public static Array2D<TR> CartesianProduct<T0, T1, TR>(this IArray<T0> columns, IArray<T1> rows, System.Func<T0, T1, TR> func){
            var _var18 = rows;
            {
                var _var17 = columns;
                {
                    var _var16 = func;
                    return columns.Count.MakeArray2D(rows.Count, (i, j) => _var16.Invoke(_var17.At(i), _var18.At(j)));
                }
            }
        }

        public static Array<T> Reverse<T>(this IArray<T> self){
            var _var20 = self;
            {
                var _var19 = self;
                return self.Indices().Map((i) => _var19.At(_var20.Count.Subtract(((Integer)1)).Subtract(i)));
            }
        }

        public static Array<T> Concat<T>(this IArray<T> xs, IArray<T> ys){
            var _var24 = xs;
            {
                var _var23 = ys;
                {
                    var _var22 = xs;
                    {
                        var _var21 = xs;
                        return xs.Count.Add(ys.Count).MapRange((i) => i.LessThan(_var21.Count) ? _var22.At(i) : _var23.At(i.Subtract(_var24.Count)));
                    }
                }
            }
        }

        public static Array<T> Prepend<T>(this IArray<T> self, T value){
            var _var26 = self;
            {
                var _var25 = value;
                return self.Count.Add(((Integer)1)).MapRange((i) => i.Equals(((Integer)0)) ? _var25 : _var26.At(i.Subtract(((Integer)1))));
            }
        }

        public static Array<T> Append<T>(this IArray<T> self, T value){
            var _var28 = self;
            {
                var _var27 = value;
                return self.Count.Add(((Integer)1)).MapRange((i) => i.Equals(((Integer)0)) ? _var27 : _var28.At(i.Subtract(((Integer)1))));
            }
        }

        public static Array<T> PrependAndAppend<T>(this IArray<T> self, T before, T after) => self.Prepend(before).Append(after);
        public static IArray<TR> ZipPairs<T1, TR>(this IArray<T1> xs, System.Func<T1, T1, TR> f){
            var _var31 = xs;
            {
                var _var30 = xs;
                {
                    var _var29 = f;
                    return xs.Count.Divide(((Integer)2)).MapRange((i) => _var29.Invoke(_var30.At(i.Multiply(((Integer)2))), _var31.At(i.Multiply(((Integer)2)).Add(((Integer)1)))));
                }
            }
        }

        public static IArray<TR> ZipTriplets<T2, TR>(this IArray<T2> xs, System.Func<T2, T2, T2, TR> f){
            var _var35 = xs;
            {
                var _var34 = xs;
                {
                    var _var33 = xs;
                    {
                        var _var32 = f;
                        return xs.Count.Divide(((Integer)3)).MapRange((i) => _var32.Invoke(_var33.At(i.Multiply(((Integer)3))), _var34.At(i.Multiply(((Integer)3)).Add(((Integer)1))), _var35.At(i.Multiply(((Integer)3)).Add(((Integer)2)))));
                    }
                }
            }
        }

        public static IArray<TR> ZipQuartets<T3, TR>(this IArray<T3> xs, System.Func<T3, T3, T3, T3, TR> f){
            var _var40 = xs;
            {
                var _var39 = xs;
                {
                    var _var38 = xs;
                    {
                        var _var37 = xs;
                        {
                            var _var36 = f;
                            return xs.Count.Divide(((Integer)4)).MapRange((i) => _var36.Invoke(_var37.At(i.Multiply(((Integer)4))), _var38.At(i.Multiply(((Integer)4)).Add(((Integer)1))), _var39.At(i.Multiply(((Integer)4)).Add(((Integer)2))), _var40.At(i.Multiply(((Integer)4)).Add(((Integer)3)))));
                        }
                    }
                }
            }
        }

        public static IArray<Integer2> Integer2Array(this IArray<Integer> xs) => xs.ZipPairs((a, b) => new Integer2(a, b));
        public static IArray<Integer3> Integer3Array(this IArray<Integer> xs) => xs.ZipTriplets((a, b, c) => new Integer3(a, b, c));
        public static IArray<Integer4> Integer4Array(this IArray<Integer> xs) => xs.ZipQuartets((a, b, c, d) => new Integer4(a, b, c, d));
        public static IArray<Vector2> Vector2Array(this IArray<Number> xs) => xs.ZipPairs((a, b) => new Vector2(a, b));
        public static IArray<Vector3> Vector3Array(this IArray<Number> xs) => xs.ZipTriplets((a, b, c) => new Vector3(a, b, c));
        public static IArray<Vector4> Vector4Array(this IArray<Number> xs) => xs.ZipQuartets((a, b, c, d) => new Vector4(a, b, c, d));
        public static Array2D<TR> Map<T0, TR>(this IArray2D<T0> xs, System.Func<T0, TR> f){
            var _var42 = xs;
            {
                var _var41 = f;
                return xs.NumColumns.MakeArray2D(xs.NumRows, (a, b) => _var41.Invoke(_var42.At(a, b)));
            }
        }

        public static IArray<T> Row<T>(this IArray2D<T> self, Integer row){
            var _var44 = row;
            {
                var _var43 = self;
                return self.NumColumns.MapRange((col) => _var43.At(col, _var44));
            }
        }

        public static IArray<T> Column<T>(this IArray2D<T> self, Integer col){
            var _var46 = col;
            {
                var _var45 = self;
                return self.NumRows.MapRange((row) => _var45.At(_var46, row));
            }
        }

        public static IArray<IArray<T>> Rows<T>(this IArray2D<T> self){
            var _var47 = self;
            return self.NumRows.MapRange((row) => _var47.Row(row));
        }

        public static IArray<IArray<T>> Columns<T>(this IArray2D<T> self){
            var _var48 = self;
            return self.NumColumns.MapRange((col) => _var48.Column(col));
        }

        public static Bounds3D Bounds(this IArray<Vector3> xs) => xs.Reduce(Bounds3D.Empty, (a, b) => a.Include(b));
        public static Array<T> FlatMap<T0, T>(this IArray<T0> xs, System.Func<T0, IArray<T>> f) => throw new NotImplementedException();
        public static IArray<Vector2> Points(this IArray<Line2D> xs) => xs.FlatMap((x) => x);
        public static IArray<Vector3> Points(this IArray<Line3D> xs) => xs.FlatMap((x) => x);
        public static IArray<Vector2> Points(this IArray<Triangle2D> xs) => xs.FlatMap((x) => x);
        public static IArray<Vector3> Points(this IArray<Triangle3D> xs) => xs.FlatMap((x) => x);
        public static IArray<Vector2> Points(this IArray<Quad2D> xs) => xs.FlatMap((x) => x);
        public static IArray<Vector3> Points(this IArray<Quad3D> xs) => xs.FlatMap((x) => x);
        public static IArray<Line2D> Lines(this IArray<Line2D> xs) => xs;
        public static IArray<Line3D> Lines(this IArray<Line3D> xs) => xs;
        public static IArray<Line2D> Lines(this IArray<Triangle2D> xs) => xs.FlatMap((x) => x.Lines);
        public static IArray<Line3D> Lines(this IArray<Triangle3D> xs) => xs.FlatMap((x) => x.Lines);
        public static IArray<Line2D> Lines(this IArray<Quad2D> xs) => xs.FlatMap((x) => x.Lines);
        public static IArray<Line3D> Lines(this IArray<Quad3D> xs) => xs.FlatMap((x) => x.Lines);
        public static IArray<Triangle2D> Triangles(this IArray<Triangle2D> xs) => xs;
        public static IArray<Triangle3D> Triangles(this IArray<Triangle3D> xs) => xs;
        public static IArray<Triangle2D> Triangles(this IArray<Quad2D> xs) => xs.FlatMap((x) => x.Triangles);
        public static IArray<Triangle3D> Triangles(this IArray<Quad3D> xs) => xs.FlatMap((x) => x.Triangles);
        public static IArray<Line2D> ToLines(this IArray<Vector2> xs, IArray<Vector2> ys) => xs.Zip(ys, (a, b) => new Line2D(a, b));
        public static IArray<Line3D> ToLines(this IArray<Vector3> xs, IArray<Vector3> ys) => xs.Zip(ys, (a, b) => new Line3D(a, b));
        public static IArray2D<Integer4> AllQuadFaceIndices<T>(this IArray2D<T> xs, Boolean closedX, Boolean closedY) => xs.NumColumns.AllQuadFaceIndices(xs.NumRows, closedX, closedY);
    }
}
